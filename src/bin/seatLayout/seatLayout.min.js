/*!
* Seat Layout Library v0.01
* Copyright (c) 2017 Sachin Kurkute
* MIT License : https://github.com/SachinKurkute/movie-seat-layout/blob/master/LICENSE
*/
!function(e){function a(a){var t=e.extend({},a.options),s=function(e){for(var a="<div class='seat-selection' style='width:1071px'>",s=0;s<e.SeatAreas.length;s++)a+=n(e.SeatAreas[s]);var l='<div class="seat-indicators">            <span class="indicator"><span class="available"></span> Available </span>            <span class="indicator"><span class="booked"></span> Booked </span>            <span class="indicator"><span class="selected"></span> Selected </span>            <span class="indicator"><span class="not-allowed"></span> Not Allowed </span>            </div>',o=t.showActionButtons?"<div class='seat-proccess-panel'> <button  type='button' class='layout-action-btn layout-btn-cancel  "+t.classes.cancelBtn+"'> Cancel </button> <button type='button' class='layout-action-btn layout-btn-done "+t.classes.doneBtn+"'> Done </button> </div>":"";return a+="<div class='movie-screen "+t.classes.screen+"'>-- Screen --</div>"+l+o+"</div>"},n=function(e){var a="<div class='seat-area "+t.classes.area+"'>";a+="<div class='seat-area-desc'>"+e.AreaDescription+"</div>";for(var s=0;s<e.Rows.length;s++)a+=l(e.Rows[s],e);return a+="</div>"},l=function(e,a){for(var s="<ul class='seat-area-row "+t.classes.row+"'> <li class='seat-row-seat row-indicator'>"+e.RowId+"</li>",n=0;n<e.Seats.length;n++)s+="NoSeat"==e.Seats[n].Status?getSeatLayoutFunc({},!1,e,a):getSeatLayoutFunc(e.Seats[n],!0,e,a);return s+="</ul>"};return getSeatLayoutFunc=function(e,s,n,l){if(e.RowId=n.RowId,e.RowNo=n.RowNo,e.AreaId=l.AreaId,e.AreaCode=l.AreaCode,e.AreaNumber=l.AreaNumber,e=a.callSeatRender(e)){var o=JSON.stringify(e),c=t.classes.seat;return s?(e&&"Available"==e.Status&&t.selectedArea.indexOf(l.AreaId)>-1&&(c+=" can-select"),e&&"Booked"==e.Status&&(c+=" seat-booked"),"<li data-seatdefination='"+o+"' class='seat-row-seat seat-yes "+c+" '><span> </span></li>"):"<li class='seat-row-seat "+c+"'></li>"}},{getAreaLayout:n,getRowLayout:l,getSeatLayout:getSeatLayoutFunc,getMainLayout:s}}e.fn.seatLayout=function(t){function s(e){return e.data("seatdefination")}var n=e.extend(!0,{},{type:"movie",showActionButtons:!0,classes:{doneBtn:"",cancelBtn:"",seat:"",row:"",area:"",screen:""},numberOfSeat:1},t),l=[],o=n.numberOfSeat,c=0,r=this,i="",d=new a({callSeatRender:function(e){return n.callOnSeatRender?n.callOnSeatRender(e):e},options:n});return i=d.getMainLayout(n.data),r.html(i),r.find("li").click(function(a){if(e(this).hasClass("can-select")){var t=(s(e(this)),e(this).nextAll().andSelf());l.length==o&&(c=0,l=[],r.find("li.current-selected").removeClass("current-selected"));for(var i=c,d=0;o-c>d&&(t[d]&&e(t[d]).hasClass("can-select")&&!e(t[d]).hasClass("current-selected"));d++)l.push(s(e(t[d]))),e(t[d]).addClass("current-selected"),i++;c=i,r.find(".layout-btn-done").prop("disabled",!(o==l.length));var u=e.extend({},s(e(this)));u.selected=l,n.callOnSeatSelect(a,u,this)}}),r.find(".layout-btn-done").prop("disabled",!0),r.find(".layout-btn-done").click(function(e){n.selectionDone&&n.selectionDone({selected:l})}),r.find(".layout-btn-cancel").click(function(a){returnFlag=!0,n.cancel&&(returnFlag=0==n.cancel(a)?!1:!0),returnFlag&&(e(r).remove(),d=null,n=null)}),this}}(jQuery);